<!-- 
  ============================================================
  СТРАНИЦА КАТАЛОГА МОТОЦИКЛОВ
  ============================================================
  Это страница с каталогом товаров и фильтрами.
  Использует семантическую разметку HTML5, JavaScript для
  динамической фильтрации товаров.
-->
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог мотоциклов - Экстрим-Драйв</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    >
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div
          class="header-content d-flex align-items-center justify-content-between"
        >
          <div class="logo d-flex align-items-center">
            <a
              href="index.html"
              class="d-flex align-items-center text-decoration-none text-white"
              style="gap: 0.5rem"
            >
              <div class="logo-icons d-flex align-items-center">
                <svg
                  width="30"
                  height="27"
                  viewBox="0 0 30 27"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.33301 1.33301L14.6663 11.9997L21.333 5.33301L27.9997 25.333H1.33301L9.33301 1.33301Z"
                    stroke="#FF6B35"
                    stroke-width="2.66667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <svg
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M24.6667 28.0003C27.244 28.0003 29.3333 25.911 29.3333 23.3337C29.3333 20.7563 27.244 18.667 24.6667 18.667C22.0893 18.667 20 20.7563 20 23.3337C20 25.911 22.0893 28.0003 24.6667 28.0003Z"
                    stroke="#FF6B35"
                    stroke-width="2.66667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M7.33366 28.0003C9.91099 28.0003 12.0003 25.911 12.0003 23.3337C12.0003 20.7563 9.91099 18.667 7.33366 18.667C4.75633 18.667 2.66699 20.7563 2.66699 23.3337C2.66699 25.911 4.75633 28.0003 7.33366 28.0003Z"
                    stroke="#FF6B35"
                    stroke-width="2.66667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M20.0003 7.99967C20.7367 7.99967 21.3337 7.40272 21.3337 6.66634C21.3337 5.92996 20.7367 5.33301 20.0003 5.33301C19.2639 5.33301 18.667 5.92996 18.667 6.66634C18.667 7.40272 19.2639 7.99967 20.0003 7.99967Z"
                    stroke="#FF6B35"
                    stroke-width="2.66667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M16 23.3337V18.667L12 14.667L17.3333 10.667L20 14.667H22.6667"
                    stroke="#FF6B35"
                    stroke-width="2.66667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div>
                <h1 class="mb-0">Экстрим-Драйв</h1>
                <p class="mb-0">Прокат снаряжения</p>
              </div>
            </a>
          </div>
          <nav class="nav-desktop d-none d-md-flex align-items-center">
            <a href="index.html" class="nav-link me-4">Главная</a>
            <a href="moto.html" class="nav-link me-4">Мотоциклы</a>
            <a href="#rental-terms" class="nav-link me-4">Условия аренды</a>
            <a href="o-nas.html" class="nav-link me-4">О нас</a>
            <a href="akcii.html" class="nav-link me-4">Акции</a>
            <a href="#contacts" class="nav-link">Контакты</a>
          </nav>
          <div class="header-actions d-flex align-items-center">
            <button class="cart-btn">
              <svg
                class="icon"
                viewBox="0 0 26 26"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="9" cy="21" r="1" />
                <circle cx="20" cy="21" r="1" />
                <path
                  d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                />
              </svg>
              <span id="cart-badge" class="cart-badge hidden">0</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- 
      ============================================================
      ОСНОВНОЕ СОДЕРЖИМОЕ - семантический тег <main>
      ============================================================
    -->
    <main class="main-content">
      <div class="min-h-screen bg-background">
        <!-- Заголовок страницы каталога -->
        <div class="page-header">
          <div class="container">
            <h1>Каталог мотоциклов</h1>
            <p>Выберите мотоцикл для незабываемых поездок</p>
          </div>
        </div>

        <div class="container py-8">
          <!-- 
            ============================================================
            ПАНЕЛЬ ФИЛЬТРОВ
            ============================================================
            Карточка с фильтрами для товаров.
          -->
          <div class="card mb-8">
            <div class="card-content">
              <!-- 
                ПРИМЕР ИСПОЛЬЗОВАНИЯ CSS GRID:
                Класс "filters-grid" использует Grid для размещения
                элементов фильтров в адаптивную сетку.
                На мобильных: 1 колонка, на десктопе: 4 колонки.
              -->
              <div class="filters-grid">
                <div class="form-group">
                  <label class="form-label">Производитель</label>
                  <select id="manufacturer-filter" class="form-select"></select>
                </div>
                <div class="form-group">
                  <label class="form-label">Класс</label>
                  <select id="subcategory-filter" class="form-select"></select>
                </div>
                <div class="form-group">
                  <label class="form-label">Сортировка</label>
                  <select id="sort-filter" class="form-select">
                    <option value="name">По названию</option>
                    <option value="price-asc">Цена: по возрастанию</option>
                    <option value="price-desc">Цена: по убыванию</option>
                  </select>
                </div>
                <div class="d-flex align-items-end">
                  <button id="reset-filters-btn" class="btn btn-ghost">
                    Сбросить фильтры
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 
            ============================================================
            КОНТЕЙНЕР ДЛЯ ТОВАРОВ
            ============================================================
            Этот div будет заполнен товарами через JavaScript.
            Использует CSS Grid для адаптивного размещения карточек.
          -->
          <div id="products-grid" class="products-grid"></div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-grid-grid">
          <div>
            <h3>Навигация</h3>
            <ul>
              <li>
                <a href="index.html" class="footer-link">Главная</a>
              </li>
              <li>
                <a href="moto.html" class="footer-link">Каталог мотоциклов</a>
              </li>
              <li>
                <a href="#rental-terms" class="footer-link">Условия аренды</a>
              </li>
            </ul>
          </div>
          <div>
            <h3>Компания</h3>
            <ul>
              <li>
                <a href="o-nas.html" class="footer-link">О нас</a>
              </li>
              <li>
                <a href="#contacts" class="footer-link">Контакты</a>
              </li>
            </ul>
          </div>
          <div>
            <h3>Контакты</h3>
            <ul>
              <li class="contact-item">
                <svg
                  class="icon-small"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                  />
                </svg>
                <span>+7 (495) 123-45-67</span>
              </li>
              <li class="contact-item">
                <svg
                  class="icon-small"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                  />
                  <polyline points="22,6 12,13 2,6" />
                </svg>
                <span>info@extremedrive.ru</span>
              </li>
              <li class="contact-item">
                <svg
                  class="icon-small"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                  <circle cx="12" cy="10" r="3" />
                </svg>
                <span>Москва, ул. Спортивная, 10</span>
              </li>
            </ul>
          </div>
          <div>
            <h3>Социальные сети</h3>
            <div class="social-links">
              <a href="#" aria-label="Instagram">
                <svg
                  class="icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5" />
                  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                  <line x1="17.5" y1="6.5" x2="17.51" y2="6.5" />
                </svg>
              </a>
              <a href="#" aria-label="Facebook">
                <svg
                  class="icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
                  />
                </svg>
              </a>
              <a href="#" aria-label="Twitter">
                <svg
                  class="icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>© 2025 Экстрим-Драйв. Все права защищены.</p>
          <p>ИНН: 7701234567 | ОГРН: 1234567890123</p>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <!-- 
      ============================================================
      JAVASCRIPT КОД ДЛЯ ДИНАМИЧЕСКОЙ ФИЛЬТРАЦИИ ТОВАРОВ
      ============================================================
      Этот скрипт отвечает за:
      1. Загрузку массива товаров
      2. Создание фильтров (производитель, класс, сортировка)
      3. Динамическое отображение товаров на странице
      4. Обработку событий фильтрации и сортировки
    -->
    <script>
      // Массив с данными о товарах (в реальном проекте данные загружались бы с сервера)
      const products = [
        {
          id: "mc-1",
          name: "QJMOTOR SVT 650",
          category: "motorcycle",
          subcategory: "Туристический",
          manufacturer: "QJMOTOR",
          price: 2500,
          image: "images/1.png",
        },
        {
          id: "mc-2",
          name: "Honda Africa Twin",
          category: "motorcycle",
          subcategory: "Эндуро",
          manufacturer: "Honda",
          price: 3200,
          image: "images/2.png",
        },
        {
          id: "mc-3",
          name: "Burton Custom Flying V",
          category: "motorcycle",
          subcategory: "Спорт-турист",
          manufacturer: "Burton",
          price: 2800,
          image: "images/3.png",
        },
        {
          id: "mc-4",
          name: "BMW R1250 Adventure",
          category: "motorcycle",
          subcategory: "Туристический",
          manufacturer: "BMW",
          price: 3500,
          image: "images/4.png",
        },
        {
          id: "mc-5",
          name: "KTM 1290 Adventure R",
          category: "motorcycle",
          subcategory: "Эндуро",
          manufacturer: "KTM",
          price: 3400,
          image: "images/5.png",
        },
        {
          id: "mc-6",
          name: "Ducati Multistrada V4 S",
          category: "motorcycle",
          subcategory: "Спорт-турист",
          manufacturer: "Ducati",
          price: 3800,
          image: "images/6.png",
        },
      ];

      // Объект для управления корзиной (работает с localStorage браузера)
      const CartManager = {
        // Получить товары из корзины (из localStorage)
        getCart() {
          const cart = localStorage.getItem("cart");
          return cart ? JSON.parse(cart) : [];
        },
        // Обновить количество товаров в бейдже корзины
        updateCartBadge() {
          const cart = this.getCart();
          const badge = document.getElementById("cart-badge");
          if (badge) {
            if (cart.length > 0) {
              badge.textContent = cart.length;
              badge.classList.remove("hidden");
            } else {
              badge.classList.add("hidden");
            }
          }
        },
      };

      // Функция для перехода на страницу товара
      function viewProduct(productId) {
        window.location.href = `product.html?id=${productId}`;
      }

      // Функция для генерации HTML-кода карточки товара
      // Принимает объект товара и возвращает строку HTML
      function renderProductCard(product) {
        return `
          <div class="card product-card" data-product-id="${product.id}">
            <div class="aspect-4-3 overflow-hidden bg-muted">
              <img src="${
                product.image
              }" style="width: 300px; height: 299px;" alt="${
          product.name
        }" class="product-image object-cover"">
            </div>
            <div class="card-content">
              <div class="d-flex align-items-start justify-content-between mb-2" style="gap: 0.5rem;">
                <h3 class="mb-0">${product.name}</h3>
                ${
                  product.subcategory
                    ? `<span class="badge badge-secondary">${product.subcategory}</span>`
                    : ""
                }
              </div>
              ${
                product.manufacturer
                  ? `<p class="text-muted mb-2">${product.manufacturer}</p>`
                  : ""
              }
              <p class="text-foreground">${product.price} ₽/сутки</p>
            </div>
            <div class="card-content pt-0">
              <button class="btn btn-primary btn-full" onclick="viewProduct('${
                product.id
              }')">
                Подробнее
              </button>
            </div>
          </div>
        `;
      }

      // ============================================================
      // ГЛАВНАЯ ФУНКЦИЯ - СРАБАТЫВАЕТ ПОСЛЕ ЗАГРУЗКИ СТРАНИЦЫ
      // ============================================================
      // Событие DOMContentLoaded срабатывает когда HTML полностью загружен
      // и готов к работе (но изображения и стили могут ещё загружаться)
      document.addEventListener("DOMContentLoaded", () => {
        // Фильтруем товары только категории "motorcycle"
        const category = "motorcycle";
        const categoryProducts = products.filter(
          (p) => p.category === category
        );

        // Получаем ссылки на элементы фильтров по их ID
        const manufacturerFilter = document.getElementById(
          "manufacturer-filter"
        );
        const subcategoryFilter = document.getElementById("subcategory-filter");
        const sortFilter = document.getElementById("sort-filter");
        const productsGrid = document.getElementById("products-grid");
        const resetBtn = document.getElementById("reset-filters-btn");

        // Функция для заполнения выпадающих списков фильтров
        function populateFilters() {
          // Создаём уникальный список производителей из массива товаров
          // Set автоматически удаляет дубликаты
          const manufacturers = [
            ...new Set(
              categoryProducts.map((p) => p.manufacturer).filter(Boolean)
            ),
          ];
          // Заполняем select производителей
          manufacturerFilter.innerHTML =
            '<option value="all">Все производители</option>' +
            manufacturers
              .map((m) => `<option value="${m}">${m}</option>`)
              .join("");

          // Аналогично создаём список категорий
          const subcategories = [
            ...new Set(
              categoryProducts.map((p) => p.subcategory).filter(Boolean)
            ),
          ];
          subcategoryFilter.innerHTML =
            '<option value="all">Все классы</option>' +
            subcategories
              .map((s) => `<option value="${s}">${s}</option>`)
              .join("");
        }

        // Функция для применения фильтров и отображения товаров
        function applyFiltersAndRender() {
          // Получаем текущие значения из фильтров
          const manufacturer = manufacturerFilter.value;
          const subcategory = subcategoryFilter.value;
          const sort = sortFilter.value;

          // Создаём копию массива товаров для фильтрации
          let filtered = [...categoryProducts];

          // Применяем фильтр по производителю
          if (manufacturer !== "all") {
            filtered = filtered.filter((p) => p.manufacturer === manufacturer);
          }
          // Применяем фильтр по категории
          if (subcategory !== "all") {
            filtered = filtered.filter((p) => p.subcategory === subcategory);
          }

          // Применяем сортировку
          filtered.sort((a, b) => {
            if (sort === "price-asc") return a.price - b.price;
            if (sort === "price-desc") return b.price - a.price;
            return a.name.localeCompare(b.name);
          });

          // Отображаем отфильтрованные товары на странице
          if (filtered.length > 0) {
            productsGrid.innerHTML = filtered.map(renderProductCard).join("");
          } else {
            productsGrid.innerHTML =
              '<p class="text-center text-muted" style="grid-column: 1 / -1;">По вашему запросу ничего не найдено.</p>';
          }
        }

        // Функция для сброса всех фильтров к значениям по умолчанию
        function resetFilters() {
          manufacturerFilter.value = "all";
          subcategoryFilter.value = "all";
          sortFilter.value = "name";
          applyFiltersAndRender();
        }

        // Инициализация страницы
        CartManager.updateCartBadge(); // Обновляем бейдж корзины
        populateFilters(); // Заполняем фильтры
        applyFiltersAndRender(); // Отображаем все товары

        // Добавляем обработчики событий на изменение фильтров
        // Каждый раз при изменении фильтра товары будут перерисовываться
        manufacturerFilter.addEventListener("change", applyFiltersAndRender);
        subcategoryFilter.addEventListener("change", applyFiltersAndRender);
        sortFilter.addEventListener("change", applyFiltersAndRender);
        resetBtn.addEventListener("click", resetFilters);
      });
    </script>
  </body>
</html>

